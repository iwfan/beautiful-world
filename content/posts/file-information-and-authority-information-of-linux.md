---
title: Linux 的文件信息与权限信息
tags:
  - linux
date: 2018-09-15 21:08:52
---

# Linux 下文件的基本属性与权限信息

linux 下通过`ll`或者`ls -l`查看文件的基本属性。而文件的权限信息是由类似与`drwxr-xr-x`这种格式的字符串表示的。

① ┆ ②
**d** ┆ **rwx rwx rwx **
**0** ┆ **123 456 789 **

这个字符串可以拆分为两大部分，第一部分就是它的第一个字符, 用来表示文件的类型。

- [ `d` ] 表示这是一个目录
- [ `-` ] 表示这是一个文件
- [ `/` ] 表示这是一个链接文件

第二部分就是文件的权限信息，是由三组【rwx】的组合组成, 这三个权限的位置不会变，如果没有权限，就会以[ `-` ]代替。其中:

- [ `r` ] 可读(read)
- [ `w` ] 可写(write)
- [ `x` ] 可执行(execute)

因为 Linux 是多用户系统，用户又是按照用户组进行分类的。所以第二部分的三组【rwx】分别代表的是文件所有者的权限、文件所有者同组用户的权限和其他用户的权限。

- [ `123` ] 第一组部分代表文件所有者的权限
- [ `456` ] 第二组部分代表文件所有者同组用户的权限
- [ `789` ] 此第三组代表的是其他用户的权限

**Linux 设置权限的两种方式**
linux 下通过`chmod`命令更改文件的权限。如果修改的是一个目录，可以增加`-R`参数进行递归修改。
这里有两种方式修改文件权限：
**1. 使用数字方式修改**：
可以使用数字代表文件的权限：

- [ `r` ]: 可以用数字`4`代表
- [ `w` ]: `2`
- [ `x` ]: `1`
- [ `-` ]: `0`

而每组权限就是各自权限的累加和：

```shell
chmod 754 config.yml
```

此时 config.yml 的权限就是：

- `所属用户`: 7 = 4 + 2 + 1 = rwx
- `同组其他用户`: 5 = 4 + 0 + 1 = r-x
- `其他用户`: 4 = 4 + 0 + 0 = r--

用字符串表示出来 config.yml 文件的权限信息就是: `-rwxr-xr--`

**2. 使用符号的方式修改**:
第二种修改权限的方式就是使用以下几种符号和`rwx`进行修改。

- [ `u` ]: (user)代表所属用户
- [ `g` ]：(group)代表同组其他用户
- [ `o` ]: (others)代表其他用户
- [ `a` ]：(all)全部用户

```shell
chmod u=rwx,g=r-x,o=r-- config.yml
```

功能与数字方式的授权功能相同。
除了可以直接设置新的权限，还可以通过以下三个符号动态修改之前的权限。

- [ `+` ]: 动态增加权限
- [ `-` ]: 删除权限
- [ `=` ]: 设定权限

```shell
chmod o-r config.yml
```

这样便取消了 config.yml 对其他用户的读取权限。

# Linux 文件与目录管理

- [ `pwd` ]: 查看当前所在的目录
- [ `ls` ]: 列出当前目录下的所有子目录
  - [ `-a` ]: 展示隐藏的目录
- [ `cd` ]: 进入指定的目录
- [`mkdir`]: 创建新的目录
  - [ `-p` ]: 创建多级目录， 例如：`mkdir -p test1/test2/test3`
- [`rmdir`]: 删除空目录
  - [ `-p` ]: 删除多级空目录
- [ `rm` ]: 删除目录或者文件, rm 命令默认不会删除目录。
  - [ `-d` ]: d 表示 dir(目录), 加上-d 参数后， 该命令与 rmdir 一致。
  - [ `-f` ]: 忽略错误信息
  - [ `-r` ]：递归删除目录下的内容。可以使用`rm -r path/to/dir`删除非空目录
- [ `cp` ]: 拷贝文件或者目录
  - [ `-p` ]: 拷贝文件的本身属性， 而非默认属性
  - [ `-d` ]: 拷贝链接文档， 而非文件本身
  - [ `-r` ]: 递归复制
  - [ `-a` ]: 等同于 -pdr
- [ `mv` ]: 移动(重命名)文件或者目录, mv source, source1 path/to/dir
  - [ `-f` ]: 不弹出提示信息， 直接覆盖原来的文件
  - [ `-i` ]: 与-f 相反， 在覆盖文件之前弹出提示信息
  - [ `-u` ]: 更新旧的文件

查看文件的命令：

- [ `cat` ]: 查看文件内容
  - [ `-n` ]: 显示行号
- [ `more` ]: 查看文件， 提供分页选项
  - [ `按键 enter` ]: 下一行
  - [ `按键 space` ]：下一页
  - [ `<C-b>` ]：返回上一页
- [ `tail` ]: 查看文件的尾部几行
  - [ `-n10`]: 查看尾部 10 行
  - [ `-f` ]: 跟随文件的变动
